var feedbackButton = document.querySelector(".button-feedback"), modal = document.querySelector(".modal"), modalClose = modal.querySelector(".modal-close"), modalForm = modal.querySelector(".message"), inputName = modalForm.querySelector("[name=user-name]"), inputEmail = modalForm.querySelector("[name=user-email]"), inputText = modalForm.querySelector("[name=text]"), isStorageSupport = !0, storageName = "", storageEmail = ""; try { storageName = localStorage.getItem("user-name") } catch (e) { isStorageSupport = !1 } isStorageSupport && (storageEmail = localStorage.getItem("user-email")), feedbackButton.addEventListener("click", function (e) { e.preventDefault(), modal.classList.add("modal-show"), isStorageSupport ? storageName && (inputName.value = storageName, storageEmail ? (inputEmail.value = storageEmail, inputText.focus()) : inputEmail.focus()) : inputName.focus() }), modalForm.addEventListener("submit", function (e) { inputName.value && inputEmail.value && inputText.value ? (localStorage.setItem("user-name", inputName.value), localStorage.setItem("user-email", inputEmail.value)) : (e.preventDefault(), modal.classList.remove("modal-error"), modal.offsetWidth, modal.classList.add("modal-error")) }), modalClose.addEventListener("click", function (e) { e.preventDefault(), modal.classList.remove("modal-show"), modal.classList.remove("modal-error") }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && (e.preventDefault(), modal.classList.remove("modal-show"), modal.classList.remove("modal-error")) });